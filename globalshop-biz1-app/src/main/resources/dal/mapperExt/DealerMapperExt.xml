<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.wangqin.mapper.SellerMapper">
	
	<sql id="Base_Column_List">
		id,name,user_id AS userId,user_name AS userName,code,type_id AS typeId,type_name AS typeName,type_code AS typeCode,gmt_create AS gmtCreate,gmt_modify AS gmtModify
	</sql>
	
	<select id="updateSellerTypeByTypeCode" parameterType="com.wangqin.model.SellerType">
		UPDATE 
			`seller` T1
		SET
			T1.type_code = #{code},
			T1.type_name = #{name},
			T1.gmt_modify = #{gmtModify}
		where 
			T1.type_id = #{id}
	</select>
	
	<select id="querySellersCount" resultType="java.lang.Integer"  parameterType="com.wangqin.vo.SellerQueryVO">
        SELECT
        	count(1)
        FROM
            `seller` T1
        where
     		   1=1
     		 <if test="companyId != null ">
            		and T1.company_id = #{companyId}
            </if>
     		<if test=" id != null and id != '' ">
            	and T1.id = #{id}
            </if>
            <if test=" name != null and name != '' ">
                and T1.name = #{name}
            </if>
            <if test=" userId != null and userId != '' ">
            	and T1.user_id = #{userId}
            </if>
            <if test=" userName != null and userName != '' ">
            	and T1.user_name = #{userName}
            </if>
            <if test=" code != null and code != '' ">
            	and T1.code = #{code}
            </if>
            <if test=" typeId != null and typeId != '' ">
            	and T1.type_id = #{typeId}
            </if>
            <if test=" typeName != null and typeName != '' ">
            	and T1.type_name = #{typeName}
            </if>
            <if test=" typeCode != null and typeCode != '' ">
            	and T1.type_code = #{typeCode}
            </if>                       
            <if test=" startGmt != null ">
             and   <![CDATA[ T1.gmt_create >= #{startGmt} ]]>
            </if>
            <if test=" endGmt != null ">
            and    <![CDATA[ T1.gmt_create <= #{endGmt} ]]>
            </if>
            
    </select>
    
    <select id="querySellers" resultType="com.wangqin.model.Seller" parameterType="com.wangqin.vo.SellerQueryVO">
        SELECT
        	 <include refid="Base_Column_List" />
        FROM
            `seller` T1
        where
             1=1
             <if test="companyId != null ">
            		and T1.company_id = #{companyId}
            </if>
            <if test=" id != null and id != '' ">
            	and T1.id = #{id}
            </if>
            <if test=" name != null and name != '' ">
                and T1.name = #{name}
            </if>
            <if test=" userId != null and userId != '' ">
            	and T1.user_id = #{userId}
            </if>
            <if test=" userName != null and userName != '' ">
            	and T1.user_name = #{userName}
            </if>
            <if test=" code != null and code != '' ">
            	and T1.code = #{code}
            </if>
            <if test=" typeId != null and typeId != '' ">
            	and T1.type_id = #{typeId}
            </if>
            <if test=" typeName != null and typeName != '' ">
            	and T1.type_name = #{typeName}
            </if>
            <if test=" typeCode != null and typeCode != '' ">
            	and T1.type_code = #{typeCode}
            </if>                       
            <if test=" startGmt != null ">
             and   <![CDATA[ T1.gmt_create >= #{startGmt} ]]>
            </if>
            <if test=" endGmt != null ">
            and    <![CDATA[ T1.gmt_create <= #{endGmt} ]]>
            </if>
          order by T1.id 
          	<![CDATA[ LIMIT #{firstStart},#{pageSize} ]]>
    </select>
    
    <!-- 判断saldId是否在主订单中 -->
    <select id="querySaleCountInOrder" resultType="java.lang.Integer"  parameterType="java.lang.Long">
    	SELECT 1 FROM outer_order WHERE sales_id=#{salesId} LIMIT 1
    </select>
    

</mapper>